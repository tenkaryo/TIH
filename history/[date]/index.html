<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- åŠ¨æ€SEOå…ƒæ•°æ® - å°†ç”±æœåŠ¡å™¨ç«¯å¡«å…… -->
    <title>{{PAGE_TITLE}}</title>
    <meta name="description" content="{{PAGE_DESCRIPTION}}">
    <meta name="keywords" content="{{PAGE_KEYWORDS}}">
    
    <!-- Open Graph å…ƒæ•°æ® -->
    <meta property="og:title" content="{{PAGE_TITLE}}">
    <meta property="og:description" content="{{PAGE_DESCRIPTION}}">
    <meta property="og:type" content="article">
    <meta property="og:url" content="{{PAGE_URL}}">
    <meta property="og:image" content="{{PAGE_IMAGE}}">
    <meta property="og:site_name" content="OnThisDay - å†å²ä¸Šçš„ä»Šå¤©">
    
    <!-- Twitter Card å…ƒæ•°æ® -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{PAGE_TITLE}}">
    <meta name="twitter:description" content="{{PAGE_DESCRIPTION}}">
    <meta name="twitter:image" content="{{PAGE_IMAGE}}">
    
    <!-- ç»“æ„åŒ–æ•°æ® -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "{{PAGE_TITLE}}",
        "description": "{{PAGE_DESCRIPTION}}",
        "url": "{{PAGE_URL}}",
        "datePublished": "{{DATE_ISO}}",
        "mainEntity": {
            "@type": "Event",
            "name": "{{DATE_DISPLAY}} - å†å²ä¸Šçš„ä»Šå¤©",
            "startDate": "{{DATE_ISO}}",
            "description": "{{PAGE_DESCRIPTION}}"
        },
        "publisher": {
            "@type": "Organization",
            "name": "OnThisDay",
            "url": "https://tih-sigma.vercel.app"
        }
    }
    </script>
    
    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="/styles.css">
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="/data.js" as="script">
    <link rel="preload" href="/script.js" as="script">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{PAGE_URL}}">
    
    <!-- è¯­è¨€ç‰ˆæœ¬ -->
    <link rel="alternate" hreflang="zh-CN" href="{{PAGE_URL}}">
    <link rel="alternate" hreflang="en-US" href="{{PAGE_URL_EN}}">
</head>
<body>
    <!-- é¢„æ¸²æŸ“çš„å…³é”®å†…å®¹ç”¨äºSEO -->
    <div id="ssr-content" style="display: none;">
        {{SSR_CONTENT}}
    </div>
    
    <!-- ä¸»è¦å†…å®¹ç»“æ„ -->
    <div class="app">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <h1 class="brand-title">OnThisDay</h1>
                    <p class="brand-subtitle">å†å²ä¸Šçš„ä»Šå¤©</p>
                </div>
                
                <div class="nav-controls">
                    <button id="dateSelector" class="nav-btn">
                        <span>é€‰æ‹©æ—¥æœŸ</span>
                    </button>
                    
                    <button id="languageSelector" class="nav-btn">
                        <span class="flag">ğŸ‡¨ğŸ‡³</span>
                        <span>ä¸­æ–‡</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <!-- è‹±é›„åŒºåŸŸ -->
            <section class="hero-section">
                <div class="container">
                    <h1 id="currentDate" class="hero-title">{{DATE_DISPLAY}}</h1>
                    <p class="date-subtitle">{{DATE_SUBTITLE}}</p>
                </div>
            </section>

            <!-- å†…å®¹åŒºåŸŸ -->
            <div class="content-wrapper">
                <div class="container">
                    <div class="content-grid">
                        <!-- ä¸»å†…å®¹ -->
                        <div class="main-column">
                            <!-- å†å²äº‹ä»¶ -->
                            <section id="events" class="content-section">
                                <div class="section-header">
                                    <h2 class="section-title">å†å²ä¸Šçš„ä»Šå¤©</h2>
                                    <p class="section-subtitle">Today in History</p>
                                </div>
                                <div id="historyEvents" class="timeline">
                                    {{HISTORY_EVENTS_SSR}}
                                </div>
                            </section>

                            <!-- åäººç”Ÿæ—¥ -->
                            <section id="births" class="content-section">
                                <div class="section-header">
                                    <h2 class="section-title">åäººç”Ÿæ—¥</h2>
                                    <p class="section-subtitle">Famous Birthdays</p>
                                </div>
                                <div id="famousBirthdays" class="people-grid">
                                    {{FAMOUS_BIRTHDAYS_SSR}}
                                </div>
                            </section>

                            <!-- åäººé€ä¸– -->
                            <section id="deaths" class="content-section">
                                <div class="section-header">
                                    <h2 class="section-title">åäººé€ä¸–</h2>
                                    <p class="section-subtitle">Famous Deaths</p>
                                </div>
                                <div id="famousDeaths" class="people-grid">
                                    {{FAMOUS_DEATHS_SSR}}
                                </div>
                            </section>
                        </div>

                        <!-- ä¾§è¾¹æ  -->
                        <aside class="sidebar">
                            <!-- å¯¼èˆª -->
                            <div class="sidebar-section">
                                <h3 class="sidebar-title">ä»Šæ—¥å¯¼èˆª</h3>
                                <nav class="sidebar-nav">
                                    <a href="#events" class="nav-link active">å†å²äº‹ä»¶</a>
                                    <a href="#births" class="nav-link">åäººç”Ÿæ—¥</a>
                                    <a href="#deaths" class="nav-link">åäººé€ä¸–</a>
                                </nav>
                            </div>

                            <!-- ç”Ÿæ—¥æŸ¥è¯¢ -->
                            <div class="sidebar-section">
                                <h3 class="sidebar-title">ç”Ÿæ—¥æŸ¥è¯¢</h3>
                                <p class="sidebar-desc">æŸ¥çœ‹ä½ çš„ç”Ÿæ—¥å½“å¤©å‘ç”Ÿäº†ä»€ä¹ˆ</p>
                                <div class="birthday-form">
                                    <select id="birthMonth" class="form-select">
                                        <option value="">é€‰æ‹©æœˆä»½</option>
                                    </select>
                                    <select id="birthDay" class="form-select">
                                        <option value="">é€‰æ‹©æ—¥æœŸ</option>
                                    </select>
                                    <button id="checkBirthday" class="btn btn-primary">æŸ¥çœ‹ç”Ÿæ—¥</button>
                                </div>
                            </div>

                            <!-- æ—¥æœŸå¯¼èˆª -->
                            <div class="date-navigation">
                                <button id="prevDate" class="nav-date-btn">
                                    <span class="nav-arrow">â†</span>
                                    <span id="prevDateText">å‰ä¸€å¤©</span>
                                </button>
                                <button id="nextDate" class="nav-date-btn">
                                    <span id="nextDateText">åä¸€å¤©</span>
                                    <span class="nav-arrow">â†’</span>
                                </button>
                            </div>
                        </aside>
                    </div>
                </div>
            </div>
        </main>

        <!-- é¡µè„š -->
        <footer class="footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-brand">
                        <h3>OnThisDay</h3>
                        <p>æ¢ç´¢å†å²ï¼Œå‘ç°ç²¾å½©</p>
                    </div>
                    
                    <div class="footer-columns">
                        <div class="footer-column">
                            <h4>ç½‘ç«™ä¿¡æ¯</h4>
                            <a href="/about">å…³äºæˆ‘ä»¬</a>
                            <a href="/contact">è”ç³»æ–¹å¼</a>
                            <a href="/data-source">æ•°æ®æº</a>
                        </div>
                        
                        <div class="footer-column">
                            <h4>æ³•å¾‹æ¡æ¬¾</h4>
                            <a href="/privacy">éšç§æ”¿ç­–</a>
                            <a href="/terms">ä½¿ç”¨æ¡æ¬¾</a>
                            <a href="/cookies">Cookieæ”¿ç­–</a>
                        </div>
                        
                        <div class="footer-column">
                            <h4>å…³æ³¨æˆ‘ä»¬</h4>
                            <a href="#">å¾®åš</a>
                            <a href="#">å¾®ä¿¡</a>
                            <a href="#">GitHub</a>
                        </div>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>Â© 2024 OnThisDay. ä¿ç•™æ‰€æœ‰æƒåˆ©</p>
                    <p>æ•°æ®æ¥æºï¼šç»´åŸºç™¾ç§‘ã€å†å²æ•°æ®åº“</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- æ¨¡æ€æ¡† -->
    <div id="dateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>é€‰æ‹©æ—¥æœŸ</h3>
                <button id="modalClose" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="date-selectors">
                    <select id="modalMonth" class="form-select">
                        <option value="">é€‰æ‹©æœˆä»½</option>
                    </select>
                    <select id="modalDay" class="form-select">
                        <option value="">é€‰æ‹©æ—¥æœŸ</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="modalCancel" class="btn btn-secondary">å–æ¶ˆ</button>
                <button id="modalConfirm" class="btn btn-primary">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <div id="languageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>é€‰æ‹©è¯­è¨€</h3>
                <button id="langModalClose" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="language-options">
                    <div class="lang-option active" data-lang="zh-CN">
                        <span class="flag">ğŸ‡¨ğŸ‡³</span>
                        <span>ä¸­æ–‡</span>
                    </div>
                    <div class="lang-option" data-lang="en-US">
                        <span class="flag">ğŸ‡ºğŸ‡¸</span>
                        <span>English</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript æ–‡ä»¶ -->
    <script>
        // è®¾ç½®å½“å‰æ—¥æœŸå‚æ•°ç”¨äºJavaScript
        window.CURRENT_DATE = '{{CURRENT_DATE}}';
        window.CURRENT_LANG = '{{CURRENT_LANG}}';
    </script>
    <script src="/data.js"></script>
    <script src="/script.js"></script>
    
    <!-- åˆå§‹åŒ–åº”ç”¨ -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // å¦‚æœæœ‰é¢„æ¸²æŸ“å†…å®¹ï¼Œæ˜¾ç¤ºå®ƒ
            const ssrContent = document.getElementById('ssr-content');
            if (ssrContent && ssrContent.innerHTML.trim()) {
                // å°†SSRå†…å®¹å¤åˆ¶åˆ°ç›¸åº”ä½ç½®
                document.body.classList.add('ssr-rendered');
            }
            
            // åˆå§‹åŒ–åº”ç”¨
            window.app = new OnThisDay(window.CURRENT_DATE);
        });
    </script>
</body>
</html>